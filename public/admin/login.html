<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign in</title>
    <link rel="stylesheet" href="/admin/styles.css" />
    <style>
      .center{max-width:420px;margin:80px auto}
    </style>
  </head>
  <body>
    <div class="center card">
      <h2>Sign in</h2>
      <p class="small">Enter the admin password to access the control panel.</p>
      <div class="row">
        <div class="col">
          <label>Password</label>
          <input id="pw" type="password" placeholder="••••••••" />
        </div>
      </div>
      <div style="display:flex;gap:8;margin-top:12px">
        <button id="loginBtn">Sign in</button>
      </div>
      <div id="msg" class="small" style="margin-top:10px;color:#f88"></div>
    </div>
    <script>
      document.getElementById('loginBtn').addEventListener('click', async () => {
        const pw = document.getElementById('pw').value;
        const res = await fetch('/api/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ password: pw }) });
        if (res.ok) {
          window.location.href = '/admin';
        } else {
          const j = await res.json().catch(()=>({error:'Login failed'}));
          document.getElementById('msg').textContent = j.error || 'Login failed';
        }
      });
      // Enter key handler
      document.getElementById('pw').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ document.getElementById('loginBtn').click(); }});
    </script>
  </body>
</html>
